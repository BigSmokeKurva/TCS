import { useRef, useEffect } from "react"
import styles from "./style.module.css"
import classNames from "classnames";

function Notification({ text, type, id, top, setNotifications }) {
    // types = error, success, warning
    const notificationRef = useRef(null);

    useEffect(() => {
        setTimeout(() => notificationRef.current.classList.add(styles.show), 0);
        setTimeout(() => {
            notificationRef.current?.classList.add(styles.hide);
            notificationRef.current?.addEventListener("transitionend", () => {
                setNotifications((notifications) => notifications.filter((notification) => notification.id !== id));
            });
        }, 3000);
    }, []);

    function closeNotification() {
        notificationRef.current?.classList.add(styles.hide);
        notificationRef.current?.addEventListener("transitionend", () => {
            setNotifications((notifications) => notifications.filter((notification) => notification.id !== id));
        });
    }

    return (
        <div className={classNames(
            styles.notification,
            type === "error" && styles.error,
            type === "success" && styles.success,
            type === "warning" && styles.warning
        )} ref={notificationRef} style={{ top: top + "px" }}>
            <div className={styles.notification_content}>
                {
                    type === "error" ?
                        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="13" viewBox="0 0 15 13" fill="none">
                            <path d="M7.67969 0.109375C7.40885 0.109375 7.15365 0.182292 6.91406 0.328125C6.67448 0.46875 6.48958 0.658854 6.35938 0.898438L1.03125 10.7891C0.911458 11.013 0.851562 11.25 0.851562 11.5C0.851562 11.7031 0.893229 11.8958 0.976562 12.0781C1.05469 12.2604 1.16146 12.4193 1.29688 12.5547C1.43229 12.6901 1.59115 12.7995 1.77344 12.8828C1.95573 12.9609 2.14844 13 2.35156 13H13.0078C13.2109 13 13.4036 12.9609 13.5859 12.8828C13.7682 12.7995 13.9271 12.6901 14.0625 12.5547C14.1979 12.4193 14.3073 12.2604 14.3906 12.0781C14.4688 11.8958 14.5078 11.7031 14.5078 11.5C14.5078 11.25 14.4479 11.013 14.3281 10.7891L9 0.898438C8.86979 0.658854 8.6849 0.46875 8.44531 0.328125C8.20573 0.182292 7.95052 0.109375 7.67969 0.109375ZM7.67969 9.75C7.77865 9.75 7.8724 9.77083 7.96094 9.8125C8.04948 9.85417 8.13021 9.91146 8.20312 9.98438C8.27083 10.0521 8.32552 10.1302 8.36719 10.2188C8.40885 10.3073 8.42969 10.401 8.42969 10.5C8.42969 10.599 8.40885 10.6927 8.36719 10.7812C8.32552 10.8698 8.27083 10.9505 8.20312 11.0234C8.13021 11.0911 8.04948 11.1458 7.96094 11.1875C7.8724 11.2292 7.77865 11.25 7.67969 11.25C7.58073 11.25 7.48698 11.2292 7.39844 11.1875C7.3099 11.1458 7.23177 11.0911 7.16406 11.0234C7.09115 10.9505 7.03385 10.8698 6.99219 10.7812C6.95052 10.6927 6.92969 10.599 6.92969 10.5C6.92969 10.401 6.95052 10.3073 6.99219 10.2188C7.03385 10.1302 7.09115 10.0521 7.16406 9.98438C7.23177 9.91146 7.3099 9.85417 7.39844 9.8125C7.48698 9.77083 7.58073 9.75 7.67969 9.75ZM8.17969 4V9H7.17969V4H8.17969Z" fill="white" />
                        </svg> :
                        type === "success" ?
                            <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15" fill="none">
                                <path d="M7.49219 0C8.17969 0 8.84115 0.0911458 9.47656 0.273437C10.1172 0.450521 10.7161 0.703125 11.2734 1.03125C11.8307 1.35417 12.3359 1.74479 12.7891 2.20312C13.2474 2.65625 13.638 3.16146 13.9609 3.71875C14.2891 4.27604 14.5417 4.875 14.7188 5.51562C14.901 6.15104 14.9922 6.8125 14.9922 7.5C14.9922 8.1875 14.901 8.85156 14.7188 9.49219C14.5417 10.1276 14.2891 10.724 13.9609 11.2812C13.638 11.8385 13.2474 12.3464 12.7891 12.8047C12.3359 13.2578 11.8307 13.6484 11.2734 13.9766C10.7161 14.2995 10.1172 14.5521 9.47656 14.7344C8.84115 14.9115 8.17969 15 7.49219 15C6.80469 15 6.14063 14.9115 5.5 14.7344C4.86458 14.5521 4.26823 14.2995 3.71094 13.9766C3.15365 13.6484 2.64583 13.2578 2.1875 12.8047C1.73438 12.3464 1.34375 11.8385 1.01563 11.2812C0.692708 10.724 0.440104 10.1276 0.257813 9.49219C0.0807292 8.85156 -0.0078125 8.1875 -0.0078125 7.5C-0.0078125 6.8125 0.0807292 6.15104 0.257813 5.51562C0.440104 4.875 0.692708 4.27604 1.01563 3.71875C1.34375 3.16146 1.73438 2.65625 2.1875 2.20312C2.64583 1.74479 3.15365 1.35417 3.71094 1.03125C4.26823 0.703125 4.86458 0.450521 5.5 0.273437C6.14062 0.0911458 6.80469 0 7.49219 0ZM7.49219 1C6.89323 1 6.3151 1.07812 5.75781 1.23437C5.20573 1.38542 4.6875 1.60417 4.20312 1.89062C3.72396 2.17187 3.28646 2.51042 2.89063 2.90625C2.5 3.29687 2.16146 3.73437 1.875 4.21875C1.59375 4.69792 1.375 5.21615 1.21875 5.77344C1.06771 6.32552 0.992188 6.90104 0.992188 7.5C0.992188 8.09896 1.06771 8.67708 1.21875 9.23438C1.375 9.78646 1.59375 10.3047 1.875 10.7891C2.16146 11.2682 2.5 11.7057 2.89063 12.1016C3.28646 12.4922 3.72396 12.8307 4.20313 13.1172C4.6875 13.3984 5.20573 13.6172 5.75781 13.7734C6.3151 13.9245 6.89323 14 7.49219 14C8.09115 14 8.66667 13.9245 9.21875 13.7734C9.77604 13.6172 10.2943 13.3984 10.7734 13.1172C11.2578 12.8307 11.6953 12.4922 12.0859 12.1016C12.4818 11.7057 12.8203 11.2682 13.1016 10.7891C13.388 10.3047 13.6068 9.78646 13.7578 9.23437C13.9141 8.67708 13.9922 8.09896 13.9922 7.5C13.9922 6.90104 13.9141 6.32552 13.7578 5.77344C13.6068 5.21615 13.388 4.69792 13.1016 4.21875C12.8203 3.73437 12.4818 3.29687 12.0859 2.90625C11.6953 2.51042 11.2578 2.17187 10.7734 1.89062C10.2943 1.60417 9.77604 1.38542 9.21875 1.23437C8.66667 1.07812 8.09115 1 7.49219 1ZM11.8438 5.85156L7.10938 10.625L4.14063 7.65625L4.84375 6.94531L7.10938 9.21094L11.1406 5.14844L11.8438 5.85156Z" fill="#237B4B" />
                            </svg> :
                            type === "warning" ?
                                <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15" fill="none">
                                    <path d="M7.49219 0C8.17969 0 8.84115 0.0911458 9.47656 0.273437C10.1172 0.450521 10.7161 0.703125 11.2734 1.03125C11.8307 1.35417 12.3359 1.74479 12.7891 2.20312C13.2474 2.65625 13.638 3.16146 13.9609 3.71875C14.2891 4.27604 14.5417 4.875 14.7188 5.51562C14.901 6.15104 14.9922 6.8125 14.9922 7.5C14.9922 8.1875 14.901 8.85156 14.7188 9.49219C14.5417 10.1276 14.2891 10.724 13.9609 11.2812C13.638 11.8385 13.2474 12.3464 12.7891 12.8047C12.3359 13.2578 11.8307 13.6484 11.2734 13.9766C10.7161 14.2995 10.1172 14.5521 9.47656 14.7344C8.84115 14.9115 8.17969 15 7.49219 15C6.80469 15 6.14063 14.9115 5.5 14.7344C4.86458 14.5521 4.26823 14.2995 3.71094 13.9766C3.15365 13.6484 2.64583 13.2578 2.1875 12.8047C1.73438 12.3464 1.34375 11.8385 1.01563 11.2812C0.692708 10.724 0.440104 10.1276 0.257813 9.49219C0.0807292 8.85156 -0.0078125 8.1875 -0.0078125 7.5C-0.0078125 6.8125 0.0807292 6.15104 0.257813 5.51562C0.440104 4.875 0.692708 4.27604 1.01563 3.71875C1.34375 3.16146 1.73438 2.65625 2.1875 2.20312C2.64583 1.74479 3.15365 1.35417 3.71094 1.03125C4.26823 0.703125 4.86458 0.450521 5.5 0.273437C6.14062 0.0911458 6.80469 0 7.49219 0ZM7.49219 10C7.6276 10 7.74479 10.0495 7.84375 10.1484C7.94271 10.2474 7.99219 10.3646 7.99219 10.5C7.99219 10.6354 7.94271 10.7526 7.84375 10.8516C7.74479 10.9505 7.6276 11 7.49219 11C7.35677 11 7.23958 10.9505 7.14063 10.8516C7.04167 10.7526 6.99219 10.6354 6.99219 10.5C6.99219 10.3646 7.04167 10.2474 7.14063 10.1484C7.23958 10.0495 7.35677 10 7.49219 10ZM7.49219 1C6.89323 1 6.3151 1.07812 5.75781 1.23437C5.20573 1.38542 4.6875 1.60417 4.20312 1.89062C3.72396 2.17187 3.28646 2.51042 2.89063 2.90625C2.5 3.29687 2.16146 3.73437 1.875 4.21875C1.59375 4.69792 1.375 5.21615 1.21875 5.77344C1.06771 6.32552 0.992188 6.90104 0.992188 7.5C0.992188 8.09896 1.06771 8.67708 1.21875 9.23438C1.375 9.78646 1.59375 10.3047 1.875 10.7891C2.16146 11.2682 2.5 11.7057 2.89063 12.1016C3.28646 12.4922 3.72396 12.8307 4.20313 13.1172C4.6875 13.3984 5.20573 13.6172 5.75781 13.7734C6.3151 13.9245 6.89323 14 7.49219 14C8.09115 14 8.66667 13.9245 9.21875 13.7734C9.77604 13.6172 10.2943 13.3984 10.7734 13.1172C11.2578 12.8307 11.6953 12.4922 12.0859 12.1016C12.4818 11.7057 12.8203 11.2682 13.1016 10.7891C13.388 10.3047 13.6068 9.78646 13.7578 9.23437C13.9141 8.67708 13.9922 8.09896 13.9922 7.5C13.9922 6.90104 13.9141 6.32552 13.7578 5.77344C13.6068 5.21615 13.388 4.69792 13.1016 4.21875C12.8203 3.73437 12.4818 3.29687 12.0859 2.90625C11.6953 2.51042 11.2578 2.17187 10.7734 1.89062C10.2943 1.60417 9.77604 1.38542 9.21875 1.23437C8.66667 1.07812 8.09115 1 7.49219 1ZM7.99219 9L6.99219 9V4H7.99219L7.99219 9Z" fill="#A16114" />
                                </svg> :
                                null
                }
                <div>{text}</div>
                <button onClick={closeNotification}>
                    {
                        type === "error" ?
                            <svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M0.490797 0C0.357873 0 0.242842 0.0485685 0.145705 0.145706C0.0485682 0.242843 0 0.357873 0 0.490798C0 0.552147 0.0127811 0.613497 0.0383434 0.674847C0.0587933 0.736196 0.0920245 0.789877 0.138037 0.83589L4.30215 5L0.138037 9.16411C0.0460122 9.25613 0 9.37117 0 9.5092C0 9.64213 0.0485682 9.75716 0.145705 9.85429C0.242842 9.95143 0.357873 10 0.490797 10C0.552147 10 0.613497 9.98977 0.674847 9.96933C0.736196 9.94376 0.789878 9.90798 0.83589 9.86196L5 5.69785L9.16411 9.86196C9.25613 9.95399 9.37117 10 9.5092 10C9.64213 10 9.75716 9.95143 9.85429 9.85429C9.95143 9.75716 10 9.64213 10 9.5092C10 9.37117 9.95399 9.25613 9.86196 9.16411L5.69785 5L9.86196 0.83589C9.90798 0.789877 9.94376 0.736196 9.96933 0.674847C9.98978 0.613497 10 0.552147 10 0.490798C10 0.357873 9.95143 0.242843 9.85429 0.145706C9.75716 0.0485685 9.64213 0 9.5092 0C9.37117 0 9.25613 0.0460123 9.16411 0.138037L5 4.30215L0.83589 0.138037C0.789878 0.0920245 0.736196 0.0587935 0.674847 0.0383436C0.613497 0.0127812 0.552147 0 0.490797 0Z" fill="white" />
                            </svg> :
                            type === "success" ?
                                <svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M0.490797 0C0.357873 0 0.242842 0.0485685 0.145705 0.145706C0.0485682 0.242843 0 0.357873 0 0.490798C0 0.552147 0.0127811 0.613497 0.0383434 0.674847C0.0587933 0.736196 0.0920245 0.789877 0.138037 0.83589L4.30215 5L0.138037 9.16411C0.0460122 9.25613 0 9.37117 0 9.5092C0 9.64213 0.0485682 9.75716 0.145705 9.85429C0.242842 9.95143 0.357873 10 0.490797 10C0.552147 10 0.613497 9.98977 0.674847 9.96933C0.736196 9.94376 0.789878 9.90798 0.83589 9.86196L5 5.69785L9.16411 9.86196C9.25613 9.95399 9.37117 10 9.5092 10C9.64213 10 9.75716 9.95143 9.85429 9.85429C9.95143 9.75716 10 9.64213 10 9.5092C10 9.37117 9.95399 9.25613 9.86196 9.16411L5.69785 5L9.86196 0.83589C9.90798 0.789877 9.94376 0.736196 9.96933 0.674847C9.98978 0.613497 10 0.552147 10 0.490798C10 0.357873 9.95143 0.242843 9.85429 0.145706C9.75716 0.0485685 9.64213 0 9.5092 0C9.37117 0 9.25613 0.0460123 9.16411 0.138037L5 4.30215L0.83589 0.138037C0.789878 0.0920245 0.736196 0.0587935 0.674847 0.0383436C0.613497 0.0127812 0.552147 0 0.490797 0Z" fill="#237B4B" />
                                </svg>
                                :
                                type === "warning" ?
                                    <svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M0.490797 0C0.357873 0 0.242842 0.0485685 0.145705 0.145706C0.0485682 0.242843 0 0.357873 0 0.490798C0 0.552147 0.0127811 0.613497 0.0383434 0.674847C0.0587933 0.736196 0.0920245 0.789877 0.138037 0.83589L4.30215 5L0.138037 9.16411C0.0460122 9.25613 0 9.37117 0 9.5092C0 9.64213 0.0485682 9.75716 0.145705 9.85429C0.242842 9.95143 0.357873 10 0.490797 10C0.552147 10 0.613497 9.98977 0.674847 9.96933C0.736196 9.94376 0.789878 9.90798 0.83589 9.86196L5 5.69785L9.16411 9.86196C9.25613 9.95399 9.37117 10 9.5092 10C9.64213 10 9.75716 9.95143 9.85429 9.85429C9.95143 9.75716 10 9.64213 10 9.5092C10 9.37117 9.95399 9.25613 9.86196 9.16411L5.69785 5L9.86196 0.83589C9.90798 0.789877 9.94376 0.736196 9.96933 0.674847C9.98978 0.613497 10 0.552147 10 0.490798C10 0.357873 9.95143 0.242843 9.85429 0.145706C9.75716 0.0485685 9.64213 0 9.5092 0C9.37117 0 9.25613 0.0460123 9.16411 0.138037L5 4.30215L0.83589 0.138037C0.789878 0.0920245 0.736196 0.0587935 0.674847 0.0383436C0.613497 0.0127812 0.552147 0 0.490797 0Z" fill="#A16114" />
                                    </svg> :
                                    null
                    }
                </button>
            </div>
        </div>
    )


}

export default Notification